(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["photo"],{2532:function(e,t,i){"use strict";var n=i("23e7"),a=i("5a34"),r=i("1d80"),o=i("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(r(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,i){var n=i("861d"),a=i("c6b6"),r=i("b622"),o=r("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},"4df4":function(e,t,i){"use strict";var n=i("0366"),a=i("7b0b"),r=i("9bdd"),o=i("e95a"),c=i("50c4"),s=i("8418"),l=i("35a1");e.exports=function(e){var t,i,d,u,f,m,p=a(e),h="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,y=l(p),w=0;if(g&&(b=n(b,v>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(t=c(p.length),i=new h(t);t>w;w++)m=g?b(p[w],w):p[w],s(i,w,m);else for(u=y.call(p),f=u.next,i=new h;!(d=f.call(u)).done;w++)m=g?r(u,b,[d.value,w],!0):d.value,s(i,w,m);return i.length=w,i}},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6ec5":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"photo"}},[[i("b-breadcrumb",[i("b-breadcrumb-item",{attrs:{to:"/Album"}},[i("i",{staticClass:"ni ni-folder-17"}),e._v(" Folder ")]),i("b-breadcrumb-item",{attrs:{active:""}},[i("i",{staticClass:"ni ni-image"}),e._v(" "+e._s(e.filename)+" ")]),i("div",{staticClass:"btns"},[i("base-button",{attrs:{type:"primary"},on:{click:e.addimg}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"./img/add_image.png",expression:"'./img/add_image.png'"}],staticClass:"rounded img-center img-fluid m-0"})])],1)],1)],i("Photoswipe",{staticClass:"row m-0 p-3 ps"},e._l(e.picture,(function(t,n){return i("div",{key:n,staticClass:"col-6 col-sm-4 col-md-4 col-lg-3 col-xl-2 card p-1",staticStyle:{display:"inline-block",height:"300px"}},[i("div",{staticClass:"col-12 p-0 card-content",staticStyle:{height:"100%"}},[i("div",{staticClass:"col-12 p-0",staticStyle:{height:"50%"}},[i("img",{directives:[{name:"pswp",rawName:"v-pswp",value:t,expression:"item"}],style:e.getImageItemStyle(t.src)})]),i("div",{staticClass:"card-body p-3",staticStyle:{height:"50%"}},[i("div",{staticClass:"txt-line-clamp2",staticStyle:{height:"50%"}},[t.edit?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"item.model"}],staticClass:"form-control",attrs:{rows:"2",maxlength:"30"},domProps:{value:t.model},on:{input:function(i){i.target.composing||e.$set(t,"model",i.target.value)}}}):i("p",{staticClass:"card-text"},[e._v(e._s(t.title))])]),i("div",{staticClass:"row btns mt-2",staticStyle:{height:"50%"}},[t.edit?i("div",{staticClass:"col-6"},[i("base-button",{attrs:{type:"danger",icon:"fa fa-times"},on:{click:function(i){return e.cancel(t)}}})],1):i("div",{staticClass:"col-6"},[i("base-button",{attrs:{type:"success",icon:"fa fa-edit"},on:{click:function(i){return e.edit(t)}}})],1),t.edit?i("div",{staticClass:"col-6"},[i("base-button",{staticClass:"updatebtn",attrs:{type:"success",icon:"fa fa-check"},on:{click:function(i){return e.update(t,n)}}})],1):i("div",{staticClass:"col-6"},[i("base-button",{staticClass:"deletebtn",attrs:{type:"danger",icon:"fa fa-trash"},on:{click:function(i){return e.del(t,n)}}})],1)])])])])})),0),i("div",[i("b-modal",{attrs:{"no-fade":"","no-close-on-backdrop":"",centered:""},model:{value:e.addmodal,callback:function(t){e.addmodal=t},expression:"addmodal"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-2 p-0 d-flex align-items-center justify-content-center"},[e._v("圖片：")]),i("div",{staticClass:"col-10"},[i("file-pond",{ref:"pond",attrs:{name:"add","label-idle":"選擇檔案或拖曳至此 (僅接受1MB以下的檔案)","allow-multiple":"true","max-files":"1",allowImageExifOrientation:"false",allowImagePreview:"true","accepted-file-types":"image/*","max-file-size":"1MB","label-max-file-size-exceeded":"檔案太大","label-max-file-size":"檔案不能超過{filesize}","label-file-processing":"上傳中","label-file-processing-complete":"上傳完成","label-tap-to-undo":"點擊刪除","label-tap-to-cancel":"點擊取消",server:e.myServer}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control form-control-alternative",attrs:{placeholder:"相片說明 (30 字以下)",maxlength:"30"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])]),i("div",{staticClass:"row warn mt-3"},[i("div",{staticClass:"swal2-validation-message",staticStyle:{display:"flex","margin-left":"-20px","margin-right":"-20px"},attrs:{id:"swal2-validation-message"}},[i("span",[e._v(e._s(e.warn))])])]),i("div",{staticClass:"row mt-3"},[i("div",{staticClass:"col-6 d-flex justify-content-end"},[i("b-button",{attrs:{id:"addbtn",variant:"primary"},on:{click:e.add}},[e._v("確定")])],1),i("div",{staticClass:"col-6 d-flex justify-content-start"},[i("b-button",{attrs:{id:"cancelbtn",variant:"cancel"},on:{click:e.cancelmodal}},[e._v("取消")])],1)])])],1)],2)},a=[],r=(i("a4d3"),i("e01a"),i("caad"),i("a434"),i("b0c0"),i("2532"),i("b85c")),o=(i("96cf"),i("1da1")),c={name:"photo",data:function(){var e=this;return{filename:this.$store.getters.file.name,addmodal:!1,file:"",myServer:{process:function(t,i,n,a){e.file=i;var r=document.getElementById("addbtn");r.disabled=!0,setTimeout((function(){a(Date.now()),r.disabled=!1}),1500)}},warn:"",picture:[],description:"",id:""}},computed:{user:function(){return this.$store.getters.user},fileinfo:function(){return this.$store.getters.file}},methods:{addimg:function(){var e=this;this.picture.length<5?this.addmodal=!this.addmodal:Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({icon:"warning",title:"相片最多只能 5 張",allowOutsideClick:!1,confirmButtonText:"確定"});case 2:case"end":return t.stop()}}),t)})))()},add:function(){var e=this,t=document.getElementsByClassName("filepond--assistant"),i=document.getElementsByClassName("warn"),n=document.getElementById("addbtn"),a=document.getElementById("cancelbtn"),r=new FormData;t[0].innerHTML.includes("檔案太大")?(i[0].hasAttribute("style","display: block")||i[0].setAttribute("style","display: block !important"),this.warn="檔案太大"):""===t[0].innerHTML?(i[0].hasAttribute("style","display: block")||i[0].setAttribute("style","display: block !important"),this.warn="未選擇檔案"):(t[0].innerHTML.includes("上傳完成")&&(r.append("image",this.file),n.disabled=!0,a.disabled=!0),r.append("description",this.description),r.append("filename",this.filename),this.axios.patch("https://vuephoto.herokuapp.com/file/"+this.id,r).then((function(t){n.disabled=!1,a.disabled=!1,e.picture.push({src:"https://vuephoto.herokuapp.com/file/"+t.data.result.name,title:t.data.result.description,edit:!1,model:""}),e.cancelmodal()})).catch((function(t){Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$swal.fire({icon:"error",title:t.response.data.message,allowOutsideClick:!1,confirmButtonText:"確定"}).then((function(e){n.disabled=!1,a.disabled=!1}));case 2:case"end":return i.stop()}}),i)})))()})))},cancelmodal:function(){this.addmodal=!this.addmodal,this.description="",this.file=""},cancel:function(e){e.edit=!1,e.model=e.title},edit:function(e){e.edit=!0,e.model=e.title},del:function(e,t){var i=this;Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=document.getElementsByClassName("deletebtn"),e.next=3,i.$swal.fire({icon:"warning",title:"確定要刪除嗎？",allowOutsideClick:!1,showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確定"}).then((function(e){if(e.isConfirmed){var a,c=Object(r["a"])(n);try{for(c.s();!(a=c.n()).done;){var s=a.value;s.disabled=!0}}catch(d){c.e(d)}finally{c.f()}var l={do:"delimage",fileindex:i.fileinfo.index,imageindex:t};i.axios.patch("https://vuephoto.herokuapp.com/file/"+i.id,l).then((function(e){i.picture.splice(t,1);var a,o=Object(r["a"])(n);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.disabled=!1}}catch(d){o.e(d)}finally{o.f()}})).catch((function(){Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.$swal.fire({icon:"error",title:"發生錯誤",allowOutsideClick:!1,confirmButtonText:"確定"}).then((function(e){i.picture.splice(t,1);var a,o=Object(r["a"])(n);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.disabled=!1}}catch(d){o.e(d)}finally{o.f()}}));case 2:case"end":return e.stop()}}),e)})))()}))}}));case 3:case"end":return e.stop()}}),e)})))()},update:function(e,t){var i,n=this,a=document.getElementsByClassName("updatebtn"),c=Object(r["a"])(a);try{for(c.s();!(i=c.n()).done;){var s=i.value;s.disabled=!0}}catch(d){c.e(d)}finally{c.f()}var l={do:"editimage",fileindex:this.fileinfo.index,imageindex:t,description:e.model};this.axios.patch("https://vuephoto.herokuapp.com/file/"+this.id,l).then((function(t){var i,n=Object(r["a"])(a);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.disabled=!1}}catch(d){n.e(d)}finally{n.f()}e.edit=!1,e.title=e.model})).catch((function(){Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$swal.fire({icon:"error",title:"發生錯誤",allowOutsideClick:!1,confirmButtonText:"確定"}).then((function(e){var t,i=Object(r["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.disabled=!1}}catch(d){i.e(d)}finally{i.f()}}));case 2:case"end":return e.stop()}}),e)})))()}))},getImageItemStyle:function(e){return{width:"100%",height:"100%",backgroundImage:"url(".concat(e,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}},getImg:function(){var e=this;this.axios.get("https://vuephoto.herokuapp.com/album/"+this.user).then((function(t){var i=t.data.result;e.id=i._id;for(var n=0;n<i.file.length;n++)if(i.file[n].name===e.filename)for(var a=0;a<i.file[n].image.length;a++)e.picture.push({src:"https://vuephoto.herokuapp.com/file/"+i.file[n].image[a].name,title:i.file[n].image[a].description,edit:!1,model:""});e.$store.commit("folder",e.checks)})).catch((function(){Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal.fire({icon:"error",title:"發生錯誤",allowOutsideClick:!1,confirmButtonText:"確定"});case 2:case"end":return t.stop()}}),t)})))()}))}},mounted:function(){this.getImg()}},s=c,l=i("2877"),d=Object(l["a"])(s,n,a,!1,null,null,null);t["default"]=d.exports},a434:function(e,t,i){"use strict";var n=i("23e7"),a=i("23cb"),r=i("a691"),o=i("50c4"),c=i("7b0b"),s=i("65f0"),l=i("8418"),d=i("1dde"),u=i("ae40"),f=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var i,n,d,u,f,m,g=c(this),y=o(g.length),w=a(e,y),x=arguments.length;if(0===x?i=n=0:1===x?(i=0,n=y-w):(i=x-2,n=h(p(r(t),0),y-w)),y+i-n>v)throw TypeError(b);for(d=s(g,n),u=0;u<n;u++)f=w+u,f in g&&l(d,u,g[f]);if(d.length=n,i<n){for(u=w;u<y-n;u++)f=u+n,m=u+i,f in g?g[m]=g[f]:delete g[m];for(u=y;u>y-n+i;u--)delete g[u-1]}else if(i>n)for(u=y-n;u>w;u--)f=u+n-1,m=u+i-1,f in g?g[m]=g[f]:delete g[m];for(u=0;u<i;u++)g[u+w]=arguments[u+2];return g.length=y-n+i,d}})},a630:function(e,t,i){var n=i("23e7"),a=i("4df4"),r=i("1c7e"),o=!r((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:a})},ab13:function(e,t,i){var n=i("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},b85c:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),i("a630"),i("fb6a"),i("b0c0"),i("25f0");function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function r(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==i["return"]||i["return"]()}finally{if(s)throw o}}}}},caad:function(e,t,i){"use strict";var n=i("23e7"),a=i("4d64").includes,r=i("44d2"),o=i("ae40"),c=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!c},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},fb6a:function(e,t,i){"use strict";var n=i("23e7"),a=i("861d"),r=i("e8b5"),o=i("23cb"),c=i("50c4"),s=i("fc6a"),l=i("8418"),d=i("b622"),u=i("1dde"),f=i("ae40"),m=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var i,n,d,u=s(this),f=c(u.length),m=o(e,f),p=o(void 0===t?f:t,f);if(r(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?a(i)&&(i=i[h],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return v.call(u,m,p);for(n=new(void 0===i?Array:i)(b(p-m,0)),d=0;m<p;m++,d++)m in u&&l(n,d,u[m]);return n.length=d,n}})}}]);
//# sourceMappingURL=photo.e55af866.js.map